<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>graphviz graphs w/ jekyll | berkhan ‚Äòb‚Äô eminsoy</title>
<meta name="generator" content="Jekyll v4.2.1">
<meta property="og:title" content="graphviz graphs w/ jekyll">
<meta name="author" content="berkhan 'b' eminsoy">
<meta property="og:locale" content="en_US">
<meta name="description" content="Hello and welcome, to another one of my posts geared towards amateurs with a head-first mentality to website development. In this post, I will try to implement, explain and illustrate how to display a graphviz graph on your very own website‚Ä¶ using jekyll and liquid ofcourse‚Ä¶ üò¨ I. Using quickchart.io Down below, is an non-interactive graphviz graph from quickcharts.io. I simply embedded the graph into my markdown file as shown below; ![quickchart.io graph](https://quickchart.io/graphviz?graph=graph{a--b}) Here we can see the result; For more complex charts ‚Äìor rather all charts‚Äì (better safe than sorry) we should adopt a more distributed approach where our .dot graph file lives outside the bounds of our markdown file. Here I‚Äôve placed my digraph_eg.dot file under the _posts&gt;graphs directory. Using the liquid capture tag I stored the graph in my_graph variable, like so; {% capture my_graph%} {% include /charts/digraph_eg.dot %} {% endcapture %} if I print out my_graph here is what I get; digraph { bgcolor=&quot;transparent&quot; main-&gt;parse-&gt;execute; main-&gt;init; main-&gt;cleanup; execute-&gt;make_string; execute-&gt;printf; init-&gt;make_string; main-&gt;printf; execute-&gt;compare; } and since quickcharts.io asks for a url encoded link, I use jekyll‚Äôs uri_escape filter to encode it. Could have used liquid‚Äôs encode_url filter as well, I guess‚Ä¶ idk, idc üòÅ but here‚Äôs my_graph in url encoded version; %0Adigraph%20%7B%0A%20%20bgcolor=%22transparent%22%0A%20%20main-%3Eparse-%3Eexecute;%0A%20%20main-%3Einit;%0A%20%20main-%3Ecleanup;%0A%20%20execute-%3Emake_string;%0A%20%20execute-%3Eprintf;%0A%20%20init-%3Emake_string;%0A%20%20main-%3Eprintf;%0A%20%20execute-%3Ecompare;%0A%7D%0A and here is the result once we tie it all together; At this point, we could also get rid of our external graphviz graph and simply capture it in a liquid variable as such; {% capture dot_graph %} digraph { bgcolor=&quot;transparent&quot; main-&gt;parse-&gt;execute; main-&gt;init; main-&gt;cleanup; execute-&gt;make_string; execute-&gt;printf; init-&gt;make_string; main-&gt;printf; execute-&gt;compare; } {% endcapture %} and it will still render; II. Using d3.js &amp; d3-graphviz &amp; hpcc-js/wasm libraries This method is‚Ä¶ I would say, is a bit more complex but does not rely on a 3rd-party service such as quickcharts. It uses d3 &amp; d3-graphviz &amp; d3-graphviz libraries ‚Äìwhich are all open source‚Äì to render the graphviz chart. a tester using magjac‚Äôs bl.ocks.org example To test out the method we head over to magjac‚Äôs and check-out this example As you may have noticed, the svg is clipped within the div and I haven‚Äôt delved too deeply into the code (because I don‚Äôt want to, and I can‚Äôt‚Ä¶ since I‚Äôve decided to take a head-first approach to all of this üò¨) to figure out a way to properly display it within the parent &lt;div&gt;, but fear not, we haven‚Äôt ran out of ammo‚Ä¶ Jacob Okamoto‚Äôs snippet to the rescue I‚Äôve found out about okamoto‚Äôs way of doing graphviz in markdown while cruising the interwebs. My first attempt at adopting his code worked pretty well except for the fact that the D3ize function would append all the rendered graphviz-svg divs to the bottom of the post, since post-content is the parent-element to our .dot code snippet highlight. To get around this issue, I‚Äôve taken a different route. I insert the graphviz-div inside the div created by the markdown code-block, and once the for-loop D3izes over each of the elements, I hide the highlight div of the language-dot code-block div. It‚Äôs not prettiest, but it gets the job done. Let‚Äôs see a few examples of how the charts actually look like down üëá. A graphviz chart example digraph G { bgcolor=&quot;transparent&quot; rankdir = LR; a -&gt; b b -&gt; c } digraph G { bgcolor=&quot;transparent&quot; rankdir = LR; a -&gt; b } digraph G { bgcolor=&quot;transparent&quot; b -&gt; c } credit : https://oko.io/howto/graphviz-in-markdown/ III. Using viz.js modules This method works too I guess üòÉ I‚Äôm using viz.js locally and have to serve to the website, which is a heavy thing to do‚Ä¶ so this would not be my go to method for serving graphviz. Here is the code for the graph below, and of course, I‚Äôm loading viz.js locally with a liquid link tag in the &lt;head&gt; section. &lt;div id=&quot;vizJS-graph&quot;&gt;&lt;/div&gt; &lt;script&gt; var viz = new Viz(); viz.renderSVGElement('digraph { a -&gt; b; b -&gt; c }') .then(function(element) { document.getElementById('vizJS-graph').appendChild(element); }) .catch(error =&gt; { // Create a new Viz instance (@see Caveats page for more info) viz = new Viz(); // Possibly display the error console.error(error); }); &lt;/script&gt; IV. Using Dagre? Haven‚Äôt looking into yet, and don‚Äôt think I will soon. üòÑ">
<meta property="og:description" content="Hello and welcome, to another one of my posts geared towards amateurs with a head-first mentality to website development. In this post, I will try to implement, explain and illustrate how to display a graphviz graph on your very own website‚Ä¶ using jekyll and liquid ofcourse‚Ä¶ üò¨ I. Using quickchart.io Down below, is an non-interactive graphviz graph from quickcharts.io. I simply embedded the graph into my markdown file as shown below; ![quickchart.io graph](https://quickchart.io/graphviz?graph=graph{a--b}) Here we can see the result; For more complex charts ‚Äìor rather all charts‚Äì (better safe than sorry) we should adopt a more distributed approach where our .dot graph file lives outside the bounds of our markdown file. Here I‚Äôve placed my digraph_eg.dot file under the _posts&gt;graphs directory. Using the liquid capture tag I stored the graph in my_graph variable, like so; {% capture my_graph%} {% include /charts/digraph_eg.dot %} {% endcapture %} if I print out my_graph here is what I get; digraph { bgcolor=&quot;transparent&quot; main-&gt;parse-&gt;execute; main-&gt;init; main-&gt;cleanup; execute-&gt;make_string; execute-&gt;printf; init-&gt;make_string; main-&gt;printf; execute-&gt;compare; } and since quickcharts.io asks for a url encoded link, I use jekyll‚Äôs uri_escape filter to encode it. Could have used liquid‚Äôs encode_url filter as well, I guess‚Ä¶ idk, idc üòÅ but here‚Äôs my_graph in url encoded version; %0Adigraph%20%7B%0A%20%20bgcolor=%22transparent%22%0A%20%20main-%3Eparse-%3Eexecute;%0A%20%20main-%3Einit;%0A%20%20main-%3Ecleanup;%0A%20%20execute-%3Emake_string;%0A%20%20execute-%3Eprintf;%0A%20%20init-%3Emake_string;%0A%20%20main-%3Eprintf;%0A%20%20execute-%3Ecompare;%0A%7D%0A and here is the result once we tie it all together; At this point, we could also get rid of our external graphviz graph and simply capture it in a liquid variable as such; {% capture dot_graph %} digraph { bgcolor=&quot;transparent&quot; main-&gt;parse-&gt;execute; main-&gt;init; main-&gt;cleanup; execute-&gt;make_string; execute-&gt;printf; init-&gt;make_string; main-&gt;printf; execute-&gt;compare; } {% endcapture %} and it will still render; II. Using d3.js &amp; d3-graphviz &amp; hpcc-js/wasm libraries This method is‚Ä¶ I would say, is a bit more complex but does not rely on a 3rd-party service such as quickcharts. It uses d3 &amp; d3-graphviz &amp; d3-graphviz libraries ‚Äìwhich are all open source‚Äì to render the graphviz chart. a tester using magjac‚Äôs bl.ocks.org example To test out the method we head over to magjac‚Äôs and check-out this example As you may have noticed, the svg is clipped within the div and I haven‚Äôt delved too deeply into the code (because I don‚Äôt want to, and I can‚Äôt‚Ä¶ since I‚Äôve decided to take a head-first approach to all of this üò¨) to figure out a way to properly display it within the parent &lt;div&gt;, but fear not, we haven‚Äôt ran out of ammo‚Ä¶ Jacob Okamoto‚Äôs snippet to the rescue I‚Äôve found out about okamoto‚Äôs way of doing graphviz in markdown while cruising the interwebs. My first attempt at adopting his code worked pretty well except for the fact that the D3ize function would append all the rendered graphviz-svg divs to the bottom of the post, since post-content is the parent-element to our .dot code snippet highlight. To get around this issue, I‚Äôve taken a different route. I insert the graphviz-div inside the div created by the markdown code-block, and once the for-loop D3izes over each of the elements, I hide the highlight div of the language-dot code-block div. It‚Äôs not prettiest, but it gets the job done. Let‚Äôs see a few examples of how the charts actually look like down üëá. A graphviz chart example digraph G { bgcolor=&quot;transparent&quot; rankdir = LR; a -&gt; b b -&gt; c } digraph G { bgcolor=&quot;transparent&quot; rankdir = LR; a -&gt; b } digraph G { bgcolor=&quot;transparent&quot; b -&gt; c } credit : https://oko.io/howto/graphviz-in-markdown/ III. Using viz.js modules This method works too I guess üòÉ I‚Äôm using viz.js locally and have to serve to the website, which is a heavy thing to do‚Ä¶ so this would not be my go to method for serving graphviz. Here is the code for the graph below, and of course, I‚Äôm loading viz.js locally with a liquid link tag in the &lt;head&gt; section. &lt;div id=&quot;vizJS-graph&quot;&gt;&lt;/div&gt; &lt;script&gt; var viz = new Viz(); viz.renderSVGElement('digraph { a -&gt; b; b -&gt; c }') .then(function(element) { document.getElementById('vizJS-graph').appendChild(element); }) .catch(error =&gt; { // Create a new Viz instance (@see Caveats page for more info) viz = new Viz(); // Possibly display the error console.error(error); }); &lt;/script&gt; IV. Using Dagre? Haven‚Äôt looking into yet, and don‚Äôt think I will soon. üòÑ">
<link rel="canonical" href="https://berkhaneminsoy.github.io/2021/12/10/graphviz-graphs-w-Jekyll.html">
<meta property="og:url" content="https://berkhaneminsoy.github.io/2021/12/10/graphviz-graphs-w-Jekyll.html">
<meta property="og:site_name" content="berkhan ‚Äòb‚Äô eminsoy">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2021-12-10T00:00:00+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="graphviz graphs w/ jekyll">
<script type="application/ld+json">
{"description":"Hello and welcome, to another one of my posts geared towards amateurs with a head-first mentality to website development. In this post, I will try to implement, explain and illustrate how to display a graphviz graph on your very own website‚Ä¶ using jekyll and liquid ofcourse‚Ä¶ üò¨ I. Using quickchart.io Down below, is an non-interactive graphviz graph from quickcharts.io. I simply embedded the graph into my markdown file as shown below; ![quickchart.io graph](https://quickchart.io/graphviz?graph=graph{a--b}) Here we can see the result; For more complex charts ‚Äìor rather all charts‚Äì (better safe than sorry) we should adopt a more distributed approach where our .dot graph file lives outside the bounds of our markdown file. Here I‚Äôve placed my digraph_eg.dot file under the _posts&gt;graphs directory. Using the liquid capture tag I stored the graph in my_graph variable, like so; {% capture my_graph%} {% include /charts/digraph_eg.dot %} {% endcapture %} if I print out my_graph here is what I get; digraph { bgcolor=&quot;transparent&quot; main-&gt;parse-&gt;execute; main-&gt;init; main-&gt;cleanup; execute-&gt;make_string; execute-&gt;printf; init-&gt;make_string; main-&gt;printf; execute-&gt;compare; } and since quickcharts.io asks for a url encoded link, I use jekyll‚Äôs uri_escape filter to encode it. Could have used liquid‚Äôs encode_url filter as well, I guess‚Ä¶ idk, idc üòÅ but here‚Äôs my_graph in url encoded version; %0Adigraph%20%7B%0A%20%20bgcolor=%22transparent%22%0A%20%20main-%3Eparse-%3Eexecute;%0A%20%20main-%3Einit;%0A%20%20main-%3Ecleanup;%0A%20%20execute-%3Emake_string;%0A%20%20execute-%3Eprintf;%0A%20%20init-%3Emake_string;%0A%20%20main-%3Eprintf;%0A%20%20execute-%3Ecompare;%0A%7D%0A and here is the result once we tie it all together; At this point, we could also get rid of our external graphviz graph and simply capture it in a liquid variable as such; {% capture dot_graph %} digraph { bgcolor=&quot;transparent&quot; main-&gt;parse-&gt;execute; main-&gt;init; main-&gt;cleanup; execute-&gt;make_string; execute-&gt;printf; init-&gt;make_string; main-&gt;printf; execute-&gt;compare; } {% endcapture %} and it will still render; II. Using d3.js &amp; d3-graphviz &amp; hpcc-js/wasm libraries This method is‚Ä¶ I would say, is a bit more complex but does not rely on a 3rd-party service such as quickcharts. It uses d3 &amp; d3-graphviz &amp; d3-graphviz libraries ‚Äìwhich are all open source‚Äì to render the graphviz chart. a tester using magjac‚Äôs bl.ocks.org example To test out the method we head over to magjac‚Äôs and check-out this example As you may have noticed, the svg is clipped within the div and I haven‚Äôt delved too deeply into the code (because I don‚Äôt want to, and I can‚Äôt‚Ä¶ since I‚Äôve decided to take a head-first approach to all of this üò¨) to figure out a way to properly display it within the parent &lt;div&gt;, but fear not, we haven‚Äôt ran out of ammo‚Ä¶ Jacob Okamoto‚Äôs snippet to the rescue I‚Äôve found out about okamoto‚Äôs way of doing graphviz in markdown while cruising the interwebs. My first attempt at adopting his code worked pretty well except for the fact that the D3ize function would append all the rendered graphviz-svg divs to the bottom of the post, since post-content is the parent-element to our .dot code snippet highlight. To get around this issue, I‚Äôve taken a different route. I insert the graphviz-div inside the div created by the markdown code-block, and once the for-loop D3izes over each of the elements, I hide the highlight div of the language-dot code-block div. It‚Äôs not prettiest, but it gets the job done. Let‚Äôs see a few examples of how the charts actually look like down üëá. A graphviz chart example digraph G { bgcolor=&quot;transparent&quot; rankdir = LR; a -&gt; b b -&gt; c } digraph G { bgcolor=&quot;transparent&quot; rankdir = LR; a -&gt; b } digraph G { bgcolor=&quot;transparent&quot; b -&gt; c } credit : https://oko.io/howto/graphviz-in-markdown/ III. Using viz.js modules This method works too I guess üòÉ I‚Äôm using viz.js locally and have to serve to the website, which is a heavy thing to do‚Ä¶ so this would not be my go to method for serving graphviz. Here is the code for the graph below, and of course, I‚Äôm loading viz.js locally with a liquid link tag in the &lt;head&gt; section. &lt;div id=&quot;vizJS-graph&quot;&gt;&lt;/div&gt; &lt;script&gt; var viz = new Viz(); viz.renderSVGElement(&#39;digraph { a -&gt; b; b -&gt; c }&#39;) .then(function(element) { document.getElementById(&#39;vizJS-graph&#39;).appendChild(element); }) .catch(error =&gt; { // Create a new Viz instance (@see Caveats page for more info) viz = new Viz(); // Possibly display the error console.error(error); }); &lt;/script&gt; IV. Using Dagre? Haven‚Äôt looking into yet, and don‚Äôt think I will soon. üòÑ","url":"https://berkhaneminsoy.github.io/2021/12/10/graphviz-graphs-w-Jekyll.html","@type":"BlogPosting","headline":"graphviz graphs w/ jekyll","dateModified":"2021-12-10T00:00:00+00:00","datePublished":"2021-12-10T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://berkhaneminsoy.github.io/2021/12/10/graphviz-graphs-w-Jekyll.html"},"author":{"@type":"Person","name":"berkhan 'b' eminsoy"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
<link type="application/atom+xml" rel="alternate" href="https://berkhaneminsoy.github.io/feed.xml" title="berkhan 'b' eminsoy">

<!--vvv META vvv-->

<!--keywords that will pop-up in search engines-->
<meta name="keywords" content="berkhan, eminsoy, architecture, student, mimar, TMMOB, columbia, gsapp, uiuc, istanbul, nyc, gkv architects, buro happold">

<!--^^^ META ^^^-->

<!--vvv START LOCAL LINKS vvv-->

<!-- Start Local Links -->
<!-- Link Favicon Logo -->
<link rel="icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">

<!-- Link local D3 Libary -->
<!-- <script type="text/javascript" src=/assets/js/d3/d3.js></script> -->

<!-- Link local W3 library -->
<!-- link rel="stylesheet" href="/_sass/minima/w3.scss" -->

<!--- Link other local JS files -->
<!--
<script type="text/javascript" src=/assets/js/iis/ideal-image-slider.min.js></script>
<script type="text/javascript" src=/assets/js/iis/iis-bullet-nav.js></script>
<script type="text/javascript" src=/assets/js/iis/iis-captions.js></script>
-->

<!-- Link asciidoc & pygments stylesheets -->
<link rel="stylesheet" href="/assets/css/ascii/asciidoc.css">
<link rel="stylesheet" href="/assets/css/ascii/asciidoc-pygments.css">

<!-- Link ideal-image-slider styles--><!-- Jekyll Ideal Image Slider Include -->
<!-- https://github.com/jekylltools/jekyll-ideal-image-slider-include -->
<!-- v1.8 -->
<!--^^^ END LOCAL LINKS ^^^-->

<!--vvv START EXTERNAL LINKS vvv-->

<!-- Fetch LoDash -->
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.js"></script>

<!-- Fetch JQuery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- *** Graphing/Charting/Drawing *** -->

<!-- Fetch D3 Library -->
<script src="https://d3js.org/d3.v6.min.js"></script>
<!--<script src="https://unpkg.com/d3@5.16.0/dist/d3.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/d3@5"></script>-->

<!-- Fetch WASM -->
<script src="https://unpkg.com/@hpcc-js/wasm@1.4.1/dist/index.min.js" type="application/javascript/"></script> <!-- unpkg takes any package on the npm and serves it as a web browser -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@hpcc-js/wasm/dist/index.js" type="javascript/worker"></script>
<script>
    var hpccWasm = window["@hpcc-js/wasm"];
</script>
-->

<!-- Fetch GoJS -->
<script src="https://unpkg.com/gojs/release/go-debug.js"></script>

<!-- Fetch D3-Graphviz -->
<script src="https://unpkg.com/d3-graphviz@4.0.0/build/d3-graphviz.js"></script>

<!-- Fetch raphael renderer js library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script>

<!-- Fetch graphdracula js library -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/graphdracula/1.2.1/dracula.min.js"></script>

<!-- Fetch VegaLite. see; https://vega.github.io/vega-lite/usage/embed.html -->
<script src="https://cdn.jsdelivr.net/npm/vega@5.21.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.2"></script>

<!-- Fetch dagre -->
<script src="https://dagrejs.github.io/project/dagre/latest/dagre.min.js"></script>
<script src="https://dagrejs.github.io/project/dagre-d3/latest/dagre-d3.min.js"></script>

<!-- Fetch chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Fetch Mermaid graphs -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.js"></script>

<!-- Fetch nomnoml -->
<script src="//unpkg.com/graphre/dist/graphre.js"></script>
<script src="//unpkg.com/nomnoml/dist/nomnoml.js"></script>

<!-- Fetch viz.js see; https://github.com/mdaines/viz.js/wiki/Usage -->
<!---->
<script src="/assets/js/viz.js/viz.js"></script>
<script src="/assets/js/viz.js/full.render.js"></script>
<!--
<script src="//unpkg.com/@aduh95/viz.js"></script>
-->

<!-- Fetch cytoscape. see; https://js.cytoscape.org/#getting-started/including-cytoscape.js -->
<!--
<script>src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.20.0/cytoscape.min.js"</script>
-->

<!-- *** Graphing/Charting/Drawing *** -->

<!-- *** Font/Style *** -->

<!-- Fetch Google Icons-->
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<!-- Fetch Fontawesome icon library -->
<!-- Load an icon library to show a hamburger menu (bars) on small screens -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<script src="https://kit.fontawesome.com/633b360a32.js" crossorigin="anonymous"></script>

<!-- Fetch Computer Modern TypeFace from; https://github.com/namn/computer-modern-web-font/tree/patch-1 
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/dreampulse/computer-modern-web-font@master/fonts.css">
-->

<!-- *** Font/Style *** -->

<!-- Fetch MathJax from; https://github.com/mathjax/MathJax-src -->
<!--
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
-->

<!-- Fetch Katex -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous">
<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" integrity="sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx" crossorigin="anonymous"></script>
<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

<!-- Fetch AnchorJS see; https://github.com/bryanbraun/anchorjs &/ https://www.bryanbraun.com/anchorjs/ -->
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>

<!-- Fetch W3.css -->
<!--
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
-->

<!-- Fetch Bootstrap -->
<!--
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
-->

<!--^^^ END EXTERNAL LINKS ^^^-->

<!--^^^ LINKS ^^^-->
</head>
<body>
    <div class="grid">
<header class="site-header">

  <div class="wrapper">
<!--a class="site-title" rel="author" href="/">berkhan &#39;b&#39; eminsoy</a--><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <ul class="trigger">
<li class="page-link"><a href="/">home</a></li>
<li class="page-link"><a href="/log/">log</a></li>
<li class="page-link"><a href="/cv/">cv</a></li>
<li class="page-link"><a href="/about/">about</a></li>
</ul>
      </nav>
</div>
</header>
<!-- Get yaml variables--><aside class="aside-left"> <!--Content for class "asideLeft" Goes Here-->
  <div class="aside-left-container wrapper">
    <p class="p-name">
      berkhan 'b' eminsoy
      </p>
    <p>
      </p>
<p>architectural designer <strong>born</strong> in <em>Istanbul</em>, <strong>trained</strong> in the <em>US</em>.</p>

    
    <address class="asideLeft__contact">
      </address>
<ul class="contact-list">
        <li>
          </li>
<li><a class="u-email" href="mailto:beminsoy@gmail.com" title="beminsoy@gmail.com">email</a></li>
        
        <li>
          <a rel="me" href="https://twitter.com/BerkhanEminsoy" title="BerkhanEminsoy">twitter</a>
        </li>
        <li>
          <a rel="me" href="https://github.com/BerkhanEminsoy" title="BerkhanEminsoy">github</a>
        </li>
        <li>
          <p class="feed-subscribe">
            <a href="/feed.xml">
              <span>Subscribe‚ÄÇ</span>
              <svg class="svg-icon orange">
                <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
              </svg>
            </a>
          </p>
        </li>
      </ul>
    
  </div>
</aside> <!-- End Aside --><main class="page-content" aria-label="Content">
        <div class="wrapper">
            <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">graphviz graphs w/ jekyll</h1>
    <p class="post-meta"><time class="dt-published" datetime="2021-12-10T00:00:00+00:00" itemprop="datePublished">
        Dec 10, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Hello and welcome, to another one of my posts geared towards amateurs with a head-first mentality to website development.
In this post, I will try to implement, explain and illustrate how to display a graphviz graph on your very own website‚Ä¶ using jekyll and liquid ofcourse‚Ä¶ üò¨</p>

<h3 id="i-using-quickchartio">I. Using quickchart.io</h3>
<p>Down below, is an non-interactive graphviz graph from quickcharts.io.</p>

<p>I simply embedded the graph into my markdown file as shown below;</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">![</span><span class="nv">quickchart.io graph</span><span class="p">](</span><span class="sx">https://quickchart.io/graphviz?graph=graph{a--b}</span><span class="p">)</span>
</code></pre></div></div>
<p>Here we can see the result;</p>

<p><img src="https://quickchart.io/graphviz?graph=graph%7Ba--b%7D" alt="quickchart.io graph" loading="lazy"></p>

<p>For more complex charts ‚Äìor rather all charts‚Äì (better safe than sorry) we should adopt a more distributed approach where our .dot graph file lives outside the bounds of our markdown file.</p>

<p>Here I‚Äôve placed my <code class="language-plaintext highlighter-rouge">digraph_eg.dot</code> file under the <code class="language-plaintext highlighter-rouge">_posts&gt;graphs</code> directory. Using the liquid <code class="language-plaintext highlighter-rouge">capture</code> tag I stored the graph in <code class="language-plaintext highlighter-rouge">my_graph</code> variable, like so;</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">capture</span><span class="w"> </span><span class="nv">my_graph</span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">include</span><span class="w"> </span>/charts/digraph_eg.dot<span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endcapture</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>if I print out <code class="language-plaintext highlighter-rouge">my_graph</code> here is what I get;</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid">digraph {
  bgcolor="transparent"
  main-&gt;parse-&gt;execute;
  main-&gt;init;
  main-&gt;cleanup;
  execute-&gt;make_string;
  execute-&gt;printf;
  init-&gt;make_string;
  main-&gt;printf;
  execute-&gt;compare;
}</code></pre></figure>

<p>and since quickcharts.io asks for a url encoded link, I use jekyll‚Äôs <code class="language-plaintext highlighter-rouge">uri_escape</code> filter to encode it. Could have used liquid‚Äôs <code class="language-plaintext highlighter-rouge">encode_url</code> filter as well, I guess‚Ä¶ <em>idk</em>, <strong>idc</strong> üòÅ but here‚Äôs <code class="language-plaintext highlighter-rouge">my_graph</code> in url encoded version;</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>%0Adigraph%20%7B%0A%20%20bgcolor=%22transparent%22%0A%20%20main-%3Eparse-%3Eexecute;%0A%20%20main-%3Einit;%0A%20%20main-%3Ecleanup;%0A%20%20execute-%3Emake_string;%0A%20%20execute-%3Eprintf;%0A%20%20init-%3Emake_string;%0A%20%20main-%3Eprintf;%0A%20%20execute-%3Ecompare;%0A%7D%0A
</code></pre></div></div>

<p>and here is the result once we tie it all together;</p>

<p><img src="https://quickchart.io/graphviz?graph=%0Adigraph%20%7B%0A%20%20bgcolor=%22transparent%22%0A%20%20main-&gt;parse-&gt;execute;%0A%20%20main-&gt;init;%0A%20%20main-&gt;cleanup;%0A%20%20execute-&gt;make_string;%0A%20%20execute-&gt;printf;%0A%20%20init-&gt;make_string;%0A%20%20main-&gt;printf;%0A%20%20execute-&gt;compare;%0A%7D" alt="complex_chart" loading="lazy"></p>

<p>At this point, we could also get rid of our external graphviz graph and simply capture it in a liquid variable as such;</p>

<figure class="highlight"><pre><code class="language-liquid" data-lang="liquid"><span class="p">{%</span><span class="w"> </span><span class="nt">capture</span><span class="w"> </span><span class="nv">dot_graph</span><span class="w"> </span><span class="p">%}</span> 
digraph {
  bgcolor="transparent"
  main-&gt;parse-&gt;execute;
  main-&gt;init;
  main-&gt;cleanup;
  execute-&gt;make_string;
  execute-&gt;printf;
  init-&gt;make_string;
  main-&gt;printf;
  execute-&gt;compare;
}
<span class="p">{%</span><span class="w"> </span><span class="nt">endcapture</span><span class="w"> </span><span class="p">%}</span></code></pre></figure>

<p>and it will still render;</p>

<p><img src="https://quickchart.io/graphviz?graph=%20%0Adigraph%20%7B%0A%20%20bgcolor=%22transparent%22%0A%20%20main-&gt;parse-&gt;execute;%0A%20%20main-&gt;init;%0A%20%20main-&gt;cleanup;%0A%20%20execute-&gt;make_string;%0A%20%20execute-&gt;printf;%0A%20%20init-&gt;make_string;%0A%20%20main-&gt;printf;%0A%20%20execute-&gt;compare;%0A%7D" alt="complex_chart" loading="lazy"></p>

<h3 id="ii-using-d3js--d3-graphviz--hpcc-jswasm-libraries">II. Using <a href="https://github.com/d3/d3">d3.js</a> &amp; <a href="https://github.com/magjac/d3-graphviz">d3-graphviz</a> &amp; <a href="https://github.com/hpcc-systems/hpcc-js-wasm">hpcc-js/wasm</a> libraries</h3>

<p>This method is‚Ä¶ I would say, is a bit more complex but does not rely on a 3rd-party service such as quickcharts. It uses d3 &amp; d3-graphviz &amp; d3-graphviz libraries ‚Äìwhich are all open source‚Äì to render the graphviz chart.</p>

<h4 id="a-tester-using-magjacs-blocksorg-example">a tester using magjac‚Äôs bl.ocks.org example</h4>
<p>To test out the method we head over to <a href="https://github.com/magjac/d3-graphviz">magjac‚Äôs</a> and check-out <a href="https://bl.ocks.org/magjac/a23d1f1405c2334f288a9cca4c0ef05b">this example</a></p>

<div class="graphviz-svg" style="text-align: center;"></div>
<script>
d3.select(".graphviz-svg").graphviz()
  .renderDot('digraph { graph [bgcolor=transparent;] a -> b}');
</script>

<p>As you may have noticed, the svg is clipped within the div and  I haven‚Äôt delved too deeply into the code (because I don‚Äôt want to, and I can‚Äôt‚Ä¶ since I‚Äôve decided to take a head-first approach to all of this üò¨) to figure out a way to properly display it within the parent <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code>, but fear not, we haven‚Äôt ran out of ammo‚Ä¶</p>

<h4 id="jacob-okamotos-snippet-to-the-rescue">
<a href="https://oko.io/">Jacob Okamoto</a>‚Äôs snippet to the rescue</h4>
<p>I‚Äôve found out about <a href="https://oko.io/howto/graphviz-in-markdown/">okamoto‚Äôs</a> way of doing graphviz in markdown while cruising the interwebs. My first attempt at adopting his code worked pretty well except for the fact that the <code class="language-plaintext highlighter-rouge">D3ize</code> function would append all the rendered <code class="language-plaintext highlighter-rouge">graphviz-svg</code> divs to the bottom of the post, since <code class="language-plaintext highlighter-rouge">post-content</code> is the parent-element to our <code class="language-plaintext highlighter-rouge">.dot</code> code snippet highlight.</p>

<p>To get around this issue, I‚Äôve taken a different route. I insert the <code class="language-plaintext highlighter-rouge">graphviz-div</code> inside the div created by the markdown code-block, and once the for-loop <em>D3izes</em> over each of the elements, I hide the <code class="language-plaintext highlighter-rouge">highlight</code> div of the <code class="language-plaintext highlighter-rouge">language-dot</code> code-block div. It‚Äôs not prettiest, but it gets the job done.</p>

<p>Let‚Äôs see a few examples of how the charts actually look like down üëá.</p>

<p><strong>A graphviz chart example</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>digraph G {
  bgcolor="transparent"
  rankdir = LR;
  a -&gt; b
  b -&gt; c
}
</code></pre></div></div>

<div class="language-dot highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">digraph</span> <span class="nv">G</span> <span class="p">{</span>
  <span class="n">bgcolor</span><span class="p">=</span><span class="s2">"transparent"</span>
  <span class="n">rankdir</span> <span class="p">=</span> <span class="nv">LR</span><span class="p">;</span>
  <span class="nv">a</span> <span class="o">-&gt;</span> <span class="nv">b</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-dot highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">digraph</span> <span class="nv">G</span> <span class="p">{</span>
  <span class="n">bgcolor</span><span class="p">=</span><span class="s2">"transparent"</span>
  <span class="nv">b</span> <span class="o">-&gt;</span> <span class="nv">c</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>credit : <a href="https://oko.io/howto/graphviz-in-markdown/">https://oko.io/howto/graphviz-in-markdown/</a></p>

<h3 id="iii-using-vizjs-modules">III. Using viz.js modules</h3>

<p>This method works too I guess üòÉ I‚Äôm using viz.js locally and have to serve to the website, which is a heavy thing to do‚Ä¶ so this would not be my go to method for serving graphviz.</p>

<p>Here is the code for the graph below, and of course, I‚Äôm loading viz.js locally with a liquid link tag in the <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> section.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"vizJS-graph"</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="kd">var</span> <span class="nx">viz</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Viz</span><span class="p">();</span>

<span class="nx">viz</span><span class="p">.</span><span class="nx">renderSVGElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">digraph { a -&gt; b; b -&gt; c }</span><span class="dl">'</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">'</span><span class="s1">vizJS-graph</span><span class="dl">'</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
<span class="p">})</span>
<span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">error</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Create a new Viz instance (@see Caveats page for more info)</span>
  <span class="nx">viz</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Viz</span><span class="p">();</span>

  <span class="c1">// Possibly display the error</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<div id="vizJS-graph"></div>

<script>
var viz = new Viz();

viz.renderSVGElement('digraph { a -> b; b -> c }')
.then(function(element) {
  document.getElementById('vizJS-graph').appendChild(element);
})
.catch(error => {
  // Create a new Viz instance (@see Caveats page for more info)
  viz = new Viz();

  // Possibly display the error
  console.error(error);
});
</script>

<h3 id="iv-using-dagre">IV. Using Dagre?</h3>

<script>
  // Create a new directed graph
  var g = new dagre.graphlib.Graph();
  
  // Set an object for the graph label
  g.setGraph({});
  
  // Default to assigning a new object as a label for each new edge.
  g.setDefaultEdgeLabel(function() { return {}; });
  
  // Add nodes to the graph. The first argument is the node id. The second is
  // metadata about the node. In this case we're going to add labels to each of
  // our nodes.
  g.setNode("kspacey",    { label: "Kevin Spacey",  width: 144, height: 100 });
  g.setNode("swilliams",  { label: "Saul Williams", width: 160, height: 100 });
  g.setNode("bpitt",      { label: "Brad Pitt",     width: 108, height: 100 });
  g.setNode("hford",      { label: "Harrison Ford", width: 168, height: 100 });
  g.setNode("lwilson",    { label: "Luke Wilson",   width: 144, height: 100 });
  g.setNode("kbacon",     { label: "Kevin Bacon",   width: 121, height: 100 });
  
  // Add edges to the graph.
  g.setEdge("kspacey",   "swilliams");
  g.setEdge("swilliams", "kbacon");
  g.setEdge("bpitt",     "kbacon");
  g.setEdge("hford",     "lwilson");
  g.setEdge("lwilson",   "kbacon");

dagre.layout(g);

</script>

<p>Haven‚Äôt looking into yet, and don‚Äôt think I will soon. üòÑ</p>

  </div>
<a class="u-url" href="/2021/12/10/graphviz-graphs-w-Jekyll.html" hidden></a>
</article>

        </div>
      </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p>¬© 2021 -&gt; present, Berkhan Eminsoy.</p>
      </div>
    </div>
  </div>
<!-- the custom footer mostly loads all the necessary javascripts -->

<!-- call graphviz D3ize js -->
<script src="/assets/js/d3ize.js"></script><!-- Jekyll Ideal Image Slider Include -->
<!-- https://github.com/jekylltools/jekyll-ideal-image-slider-include -->
<!-- v1.8 --><!-- page sliders =  -->
<!-- layout sliders =  --><!-- iis array pre-js =  --><!-- iis array pre-js (after image_sliders_load_all) =  -->
<!-- inspect iis array pre-js (after image_sliders_load_all) = [] -->
<!-- checks to see if any sliders exist on the loaded page --><!-- taken from https://varunagrawal.github.io/2018/03/27/latex-jekyll/ -->
<!-- Parse the Latex divs with Katex-->
<script type="text/javascript">
  $("script[type='math/tex']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex, {displayMode: false});
  });
  
  $("script[type='math/tex; mode=display']").replaceWith(
    function(){
      var tex = $(this).text();
      return katex.renderToString(tex.replace(/%.*/g, ''), {displayMode: true});
  });
</script><!-- looks for divs with type='math/tex' and parses them through KaTeX -->


<script>
  mermaid.initialize({ startOnLoad: true });
</script>

<!-- script to add header deep links. see; https://www.bryanbraun.com/anchorjs/ -->
<script>
  anchors.add();
</script>

</footer>

</div>
  </body>
</html>
